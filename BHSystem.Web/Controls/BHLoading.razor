@inject ILoadingCore SpinnerService
@implements IDisposable


@if (IsShow)
{
    <div class="modal fade show" id="myModal" style="display:block;z-index:20000" aria-modal="true" role="dialog">
        <div class="spinner-container" style="height:100%;background-color:whitesmoke;opacity:0.7;align-items:center;display:flex;">
            <SpinKitCircle />
        </div>
    </div>
}


@code {
    [Parameter]
    public bool IsShow { get; set; } = false;
    protected override void OnInitialized()
    {
        SpinnerService.OnShow += ShowSpinner;
        SpinnerService.OnHide += HideSpinner;
    }

    public void ShowSpinner()
    {
        IsShow = true;
        InvokeAsync(StateHasChanged);
    }

    public void HideSpinner()
    {
        IsShow = false;
        InvokeAsync(StateHasChanged);
    }

    public void Dispose()
    {
        SpinnerService.OnShow -= ShowSpinner;
        SpinnerService.OnHide -= HideSpinner;
    }

}
